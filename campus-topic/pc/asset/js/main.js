define(function(require){function n(){require(["jquery"],function(n){n("a.add-redirect").each(function(t,i){var o=n(i).attr("href"),e=window.location.href;o+=(o.indexOf("?")>-1?"&":"?")+"redict_url="+encodeURIComponent(e),n(i).attr("href",o)}),n(".weixin").on("mouseover",function(){n(this).children("div").show()}).on("mouseout",function(){n(this).children("div").hide()})})}function t(n){if(e)return alert("今天已投票，请明天再来！"),!1;var t=$(".group .btn").eq(n),i=$(".popup .btn").eq(n),o=t.children("em"),r=parseInt(o.text(),10)+1;t.add(i).find("em").text(r),e=1}function i(){require(["jquery"],function(n){n(".group .btn").on("click",function(){var i=n(this),o=n(".group .btn").index(i);return t(o),!1}),n(".popup .btn").on("click",function(){var i=n(this),o=n(".popup .btn").index(i);return t(o),!1}),n(".photo").on("click",function(){var t=n(this),i=n(".photo").index(t);return o(i),!1}),n(".mask").on("click",function(){n(this).hide(),n(".popup").hide()}),n(".popup-close").on("click",function(){return n(this).closest(".popup").hide(),n(".mask").hide(),!1})})}function o(n){require(["jquery"],function(t){var i=t(".popup-"+n);if(i.size()>0){i.show();var o=(t(window).width()-i.width())/2,e=Math.max(t(window).scrollTop()+100,550);i.css({left:o+"px",top:e+"px"})}t(".mask").show().height(t(document.documentElement).height())})}var e,r={};return r.init=function(){n(),i()},r});