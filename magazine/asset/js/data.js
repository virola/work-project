define(["jquery","util"],function(n,t){function e(t){var e=[];return n.each(t,function(n,t){e[n]=o(t)}),e.join("")}function r(){var n=Math.ceil(10*Math.random());return f[n]?r():(f[n]=1,a+n+".jpg")}function o(n){return n.bgurl=r(),d||(d=n.bgurl),t.format(l,n)}function c(){var n=window.location.href,t=n.lastIndexOf("/");return n.substr(0,t)+"/"+d}var i={},a="mock/bg/",u={};i.render=function(t,r){var o=t.url;n.getJSON(o).done(function(t){n("#content").html(e(t.pages)),document.title=u.title=t.name;var o=document.querySelector('head>meta[name="description"]'),c=document.querySelector('head>meta[name="keywords"]');c&&(c.content=t.keywords),o&&(o.content=u.content=t.description),r&&r()})};var d,l='<section style="background-image: url(#{bgurl})"><div class="page"><h2>#{title}</h2><p>#{content}</p></div></section>',f={};return i.getShareData=function(){return u.icon=c(),u.link=window.location.href,u},i});